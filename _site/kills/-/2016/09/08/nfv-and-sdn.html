<!DOCTYPE html>
<html lang="en">

    <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>(转) 什么是NFV?它与SDN有什么关系?</title>

    <link href="/favicon.ico" rel="icon" type="image/x-icon"/>
    <!-- Bootstrap Core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/css/clean-blog.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="/css/fontello.min.css" rel="stylesheet" type="text/css">
    <!--
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    -->

    <script src="/js/jquery.min.js"></script>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>




<body>

        <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/index.html"><!--Jerrylou Avatar--></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    <li>
                        <a href="/about.html">About</a>
                    </li>
                    <li>
                        <a href="/contact.html">Contact</a>
                    </li>
                    <li>
                        <a href="/resume.html">Resume</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>



            <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="intro-header" style="background-image: url('/img/post-bg.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1>(转) 什么是NFV?它与SDN有什么关系?</h1>
                        <h2 class="subheading">虚拟化网络技术NFV与SDN的关系</h2>
                        <span class="meta">写于 2016-09-8 By <a href="/index.html">Jerrylou</a></span>
                    </div>
                </div>
            </div>
        </div>
    </header>



    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p>什么叫网络虚拟化？先上两张简单粗暴的图。</p>

<p><img src="http://7xnzbp.com2.z0.glb.qiniucdn.com/wp-content/uploads/2015/05/%E4%BB%80%E4%B9%88%E6%98%AFNFV%EF%BC%9F%E5%AE%83%E4%B8%8ESDN%E6%9C%89%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB%EF%BC%9F%E5%9B%BE1.png" alt="Alt text" title="图1"></p>

<p><img src="http://7xnzbp.com2.z0.glb.qiniucdn.com/wp-content/uploads/2015/05/%E4%BB%80%E4%B9%88%E6%98%AFNFV%EF%BC%9F%E5%AE%83%E4%B8%8ESDN%E6%9C%89%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB%EF%BC%9F%E5%9B%BE2.png" alt="Alt text" title="图2"></p>

<p>所有的通信应用无非就是两部分组成：计算和网络。这两者关系密不可分，但两者关系严重缺乏对称性，网络一直拖累着计算。</p>

<p>4G网络RAN将会不断进化，据说，未来的4G网络空口速率将是现在的10倍。随着智能硬件的爆发，大量的应用接入4G网络，人们的流量需求如同海啸般汹涌而至，我们似乎赶上了好时代。不过，传统的通信网络里，每一类服务对应基于专用集成电路的带有专用处理器的专用服务器。网络里的设备很多，但是，这些家伙就像霸道总裁的办公室，仅供总裁专用，不管他在与不在，位置都占在那里，谁也不敢冒然挪用。</p>

<p>这样下去，网络会严重拖计算的后腿。于是，有人想到了虚拟化。</p>

<p>或者，可以这么理解，服务器觉得老这样拖着网络跑不是办法，迟早会被累死，就开始向网络扔砖头了！</p>

<p><img src="http://7xnzbp.com2.z0.glb.qiniucdn.com/wp-content/uploads/2015/05/%E4%BB%80%E4%B9%88%E6%98%AFNFV%EF%BC%9F%E5%AE%83%E4%B8%8ESDN%E6%9C%89%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB%EF%BC%9F%E5%9B%BE3.jpg" alt="Alt text" title="图3"></p>

<p>专用的硬件对应专用的服务，这样的花费是昂贵的，为了节省成本，我们得想想物尽其用。</p>

<p>想想你有一栋超级大的空置的公寓，你想出租，但是每一位租客的需求是不一样的。这个时候，你想到了“虚拟化”。根据租客的需求，把这栋公寓虚拟化成不同的建筑风格。于是，你对租客1说，“我有两栋公寓要出租，你喜欢红色那一栋还是蓝色那一栋？”。然后你对租客2说，“我有三栋公寓要出租，大、中、小，你喜欢哪一栋？”。接着租客3。。。 继续忽悠。。。 然后，所有的租客都住进了你的虚拟公寓，你按住宿时间和使用空间来收租金。</p>

<p><img src="http://7xnzbp.com2.z0.glb.qiniucdn.com/wp-content/uploads/2015/05/%E4%BB%80%E4%B9%88%E6%98%AFNFV%EF%BC%9F%E5%AE%83%E4%B8%8ESDN%E6%9C%89%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB%EF%BC%9F%E5%9B%BE4.png" alt="Alt text" title="图4"></p>

<p>2012年10月，13家运营商发起在ETSI组织下正式成立网络功能虚拟化工作组，即ETSI ISG NFV，致力于实现网络虚拟化的需求定义和系统架构制定。</p>

<p>谈到虚拟化，首先得了解什么是虚拟化技术？最常用的虚拟化技术有操作系统中内存的虚拟化，实际运行时用户需要的内存空间可能远远大于物理机器的内存大小，利用内存的虚拟化技术，用户可以将一部分硬盘虚拟化为内存，而这对用户是透明的。又如，可以利用虚拟专用网技术（VPN）在公共网络中虚拟化一条安全，稳定的“隧道”，用户感觉像是使用私有网络一样。</p>

<p>NFV就是基于大型共享的OTS（Off-The-Shelf，成品）服务器，通过软件定义的方式，探索网络实体的虚拟化使用。在NFV中使用的虚拟机（Virtual Machines，VMs）技术是虚拟化技术的一种。</p>

<p>基于软件定义的虚拟机部署成本低，而且可以快速适应网络需求变化。虚拟机就像是将所有能想到的东西都放在一台物理服务器（physical server）上，有了云计算和虚拟化，那些冗余的服务器都可以部署在独立的物理服务器上，不但可以并行处理，满足网络峰值需求，还可以根据网络需求随时释放资源，方便部署，利于故障管理，快速升级，快速满足市场需求。</p>

<p>NFV技术颠覆了传统电信封闭专用平台的思想，同时引入灵活的弹性资源管理理念，因此，ETSI NFV提出了突破传统网元功能限制、全新通用的NFV架构下图所示。</p>

<p><img src="http://7xnzbp.com2.z0.glb.qiniucdn.com/wp-content/uploads/2015/05/%E4%BB%80%E4%B9%88%E6%98%AFNFV%EF%BC%9F%E5%AE%83%E4%B8%8ESDN%E6%9C%89%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB%EF%BC%9F%E5%9B%BE5.png" alt="Alt text" title="图5"></p>

<p>NFV技术主要由3个部分构成：VNF（虚拟网络层，Virtualized Network Function）、NFVI（网络功能虚拟化基础设施NFVI，NFV Infrastructure)和MANO（NFV管理与编排，Management and Orchestration)。</p>

<p>（1）虚拟网络层是共享同一物理OTS服务器的VNF集。对应的就是各个网元功能的软件实现，比如EPC网元、IMS网元等的逻辑实现。</p>

<p>（2）NFVI，你可以将它理解为基础设施层，从云计算的角度看，就是一个资源池。NFVI需要将物理计算/存储/交换资源通过虚拟化转换为虚拟的计算/存储/交换资源池。NFVI映射到物理基础设施就是多个地理上分散的数据中心，通过高速通信网连接起来。</p>

<p>（3）NFVMANO。基于不同的服务等级协议（Service Level Agreements ，SLAs），NFVMANO运营支撑层负责“公平”的分配物理资源，同时还负责冗余管理、错误管理和弹性调整等，相当于目前目前的OSS/BSS系统。</p>

<p>这样一来，现在的移动通信网络结构就变成了这样：</p>

<p><img src="http://7xnzbp.com2.z0.glb.qiniucdn.com/wp-content/uploads/2015/05/%E4%BB%80%E4%B9%88%E6%98%AFNFV%EF%BC%9F%E5%AE%83%E4%B8%8ESDN%E6%9C%89%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB%EF%BC%9F%E5%9B%BE6.png" alt="Alt text" title="图6"></p>

<p>上图顶部的VNF对应了网元功能的逻辑实现，比如，由多个VNF组成的VNF-FG（VNF Forwarding Graph）定义了LTE网络服务。</p>

<p>那么软件定义网络（SDN）和NFV又有什么关系呢？</p>

<p>NFV负责各种网元的虚拟化，而SDN负责网络本身的虚拟化（比如，网络节点和节点之间的相互连接）。我们先来看看一个典型的网络结构图。</p>

<p><img src="http://7xnzbp.com2.z0.glb.qiniucdn.com/wp-content/uploads/2015/05/%E4%BB%80%E4%B9%88%E6%98%AFNFV%EF%BC%9F%E5%AE%83%E4%B8%8ESDN%E6%9C%89%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB%EF%BC%9F%E5%9B%BE7.png" alt="Alt text" title="图7"></p>

<p>如上图，一个网络由网络节点和节点间的链路组成。每一个节点都有一个控制面和与其它节点交换的网络信息。在上图中，右边的H节点获知一个新的网络（10.2.3.x/24）存在，现在它需要将这一信息告诉给网络中的其它节点。然而，节点H只和节点F和G直接相连，节点H通过链路状态通告（Link State Advertisements ，LSAs）通知节点F和G，F和G再将信息传递给它们的邻近节点，最终该消息传达到整个网络。这样，网络内每个节点都会更新自己的路由表，以确保数据可以传送到网络10.2.3.x/24。</p>

<p>如果节点C和E之间的链路中断，尽管C和E知道C-E链路中断，但节点A并不知道，节点A会继续通过C-E链路向网络10.2.3.x/24传送数据包。由于节点的“近视”，导致数据堆积在该节点，这需要花一些时间来向整个网络传送网络状态更新信息和完成纠错。网络越大，这种情况就越容易发生。</p>

<p>我们再来看看节点G，它由控制面（control plane）和数据面（data plane）组成。为了适应快速更新，控制面基本上是基于软件的，这实际上意味着控制消息的处理时长比基于硬件的逻辑单元（比如，数据面）要慢5到10倍。一直以来，我们仅要求控制面能够灵活更新，但对时延要求并不是太高。相对于数据面来讲，时延要求较高，我们希望数据包能够传送得越快越好，所以它必须是基于硬件来实现的。尽管基于软件实现的控制面能满足目前的要求，但随着设备的大量接入，特别是物联网的应用，控制面的时延也需要进一步提升。</p>

<p>软件定义网络（SDN）负责分离控制面和数据面，将网络控制面整合于一体。这样，网络控制面对网络数据面就有一个宏观的全面的视野。路由协议交换、路由表生成等路由功能均在统一的控制面完成。实现控制平面与数据平面分离的协议叫OpenFlow，OpenFlow是SDN一个网络协议。如下图所示：</p>

<p><img src="http://7xnzbp.com2.z0.glb.qiniucdn.com/wp-content/uploads/2015/05/%E4%BB%80%E4%B9%88%E6%98%AFNFV%EF%BC%9F%E5%AE%83%E4%B8%8ESDN%E6%9C%89%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB%EF%BC%9F%E5%9B%BE8.png" alt="Alt text" title="图8"></p>

<p>从上图中，我们可以看到，首先需要通过OpenFlow将网络拓扑镜像到控制面，控制面初始化网络拓扑，初始化完成后，控制面会实时更新网络拓扑。</p>

<p>控制面完成初始化后，会向每个转发节点发送转发表，根据转发表用户数据在网络内传送。假设现在节点H获知新的网络 (10.2.3.x/24)。节点H将通过OpenFlow告知控制面，因为控制面统领全局，它可以快速的为每一个转发节点创建新的路由表，这样用户数据就可以传送到这个新网络。</p>

<p>转载自：<a href="http://my.oschina.net/tantexian/">tantexian博客</a></p>

                <div id="disqus_thread"></div>
            </div>
        </div>
    </div>

    <hr>
<link rel="stylesheet" href="/css/github.min.css">
<script src="/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//jerrylou.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


        <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                        <li>
                            <a href="https://twitter.com/gunsluo">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.facebook.com/gunsluo">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/gunsluo">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    </ul>
                    <p class="copyright text-muted">
                        Copyright &copy; Jerrylou 2016
                        <a href="mailto:gunsluo@gmail.com">gunsluo@gmail.com</a>
                    </p>
                </div>
            </div>
        </div>
    </footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83957804-1', 'auto');
  ga('send', 'pageview');

</script>


    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="/js/clean-blog.min.js"></script>

</body>

</html>
